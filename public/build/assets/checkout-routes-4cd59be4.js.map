{"version":3,"file":"checkout-routes-4cd59be4.js","sources":["../../../common/resources/client/auth/guards/not-subscribed-route.tsx","../../../common/resources/client/billing/checkout/checkout-layout.tsx","../../../common/resources/client/billing/requests/use-checkout-product.ts","../../../common/resources/client/billing/checkout/checkout-product-summary.tsx","../../../node_modules/@paypal/paypal-js/dist/esm/paypal-js.js","../../../common/resources/client/billing/checkout/paypal/use-paypal.ts","../../../common/resources/client/billing/checkout/phonesub/use-phonesub.ts","../../../common/resources/client/alerts/alert.tsx","../../../common/resources/client/utils/string/obfuscate-phone.ts","../../../common/resources/client/billing/checkout/phonesub/phonesub-elements-form.tsx","../../../common/resources/client/billing/checkout/checkout.tsx","../../../common/resources/client/billing/checkout/stripe/checkout-stripe-done.tsx","../../../common/resources/client/billing/checkout/paypal/checkout-paypal-done.tsx","../../../common/resources/client/billing/checkout/phonesub/checkout-phonesub-done.tsx","../../../common/resources/client/billing/checkout/checkout-routes.tsx"],"sourcesContent":["import {useAuth} from '../use-auth';\nimport {ReactElement} from 'react';\nimport {Navigate, Outlet} from 'react-router-dom';\n\ninterface GuestRouteProps {\n  children: ReactElement;\n}\nexport function NotSubscribedRoute({children}: GuestRouteProps) {\n  const {isLoggedIn, isSubscribed} = useAuth();\n\n  if (!isLoggedIn) {\n    return <Navigate to=\"/register\" replace />;\n  }\n\n  if (isLoggedIn && isSubscribed) {\n    return <Navigate to=\"/billing\" replace />;\n  }\n\n  return children || <Outlet />;\n}\n","import {Fragment, ReactElement, useEffect} from 'react';\nimport {Navbar} from '../../ui/navigation/navbar/navbar';\nimport {CustomMenu} from '../../menus/custom-menu';\nimport {LocaleSwitcher} from '../../i18n/locale-switcher';\nimport {removeFromLocalStorage} from '../../utils/hooks/local-storage';\nimport {StaticPageTitle} from '../../seo/static-page-title';\nimport {Trans} from '../../i18n/trans';\n\ninterface CheckoutLayoutProps {\n  children: [ReactElement, ReactElement];\n}\nexport function CheckoutLayout({children}: CheckoutLayoutProps) {\n  const [left, right] = children;\n\n  useEffect(() => {\n    removeFromLocalStorage('be.onboarding.selected');\n  }, []);\n\n  return (\n    <Fragment>\n      <StaticPageTitle>\n        <Trans message=\"Checkout\" />\n      </StaticPageTitle>\n      <Navbar\n        size=\"sm\"\n        color=\"transparent\"\n        className=\"z-10 mb-20 md:mb-0\"\n        textColor=\"text-main\"\n        logoColor=\"dark\"\n        darkModeColor=\"transparent\"\n        menuPosition=\"checkout-page-navbar\"\n      />\n      <div className=\"md:flex w-full mx-auto justify-between px-20 md:px-0 md:pt-128 md:max-w-950\">\n        <div className=\"hidden md:block fixed right-0 top-0 w-1/2 h-full bg-alt shadow-[15px_0_30px_0_rgb(0_0_0_/_18%)]\" />\n        <div className=\"md:w-400 overflow-hidden\">\n          {left}\n          <CustomMenu\n            menu=\"checkout-page-footer\"\n            className=\"text-xs mt-50 text-muted overflow-x-auto\"\n          />\n          <div className=\"mt-40\">\n            <LocaleSwitcher />\n          </div>\n        </div>\n        <div className=\"hidden md:block w-384\">\n          <div className=\"relative z-10\">{right}</div>\n        </div>\n      </div>\n    </Fragment>\n  );\n}\n","import {keepPreviousData, useQuery} from '@tanstack/react-query';\nimport {apiClient} from '../../http/query-client';\nimport {BackendResponse} from '../../http/backend-response/backend-response';\nimport {Product} from '../product';\nimport {useParams} from 'react-router-dom';\n\nconst endpoint = (productId: string | number) =>\n  `billing/products/${productId}`;\n\nexport interface FetchProductResponse extends BackendResponse {\n  product: Product;\n}\n\nexport function useCheckoutProduct() {\n  const {productId, priceId} = useParams();\n  const query = useQuery({\n    queryKey: [endpoint(productId!)],\n    queryFn: () => fetchProduct(productId!),\n    placeholderData: keepPreviousData,\n    enabled: productId != null && priceId != null,\n  });\n\n  const product = query.data?.product;\n  const price =\n    product?.prices.find(p => p.id === parseInt(priceId!)) ||\n    product?.prices[0];\n\n  return {status: query.status, product, price};\n}\n\nfunction fetchProduct(\n  productId: string | number,\n): Promise<FetchProductResponse> {\n  return apiClient.get(endpoint(productId)).then(response => response.data);\n}\n","import {Trans} from '../../i18n/trans';\nimport {FormattedPrice} from '../../i18n/formatted-price';\nimport {useCheckoutProduct} from '../requests/use-checkout-product';\nimport {m} from 'framer-motion';\nimport {Skeleton} from '../../ui/skeleton/skeleton';\nimport {Product} from '../product';\nimport {Price} from '../price';\nimport {FormattedCurrency} from '../../i18n/formatted-currency';\nimport {ProductFeatureList} from '../pricing-table/product-feature-list';\nimport {opacityAnimation} from '../../ui/animation/opacity-animation';\n\ninterface CheckoutProductSummaryProps {\n  showBillingLine?: boolean;\n}\nexport function CheckoutProductSummary({\n  showBillingLine = true,\n}: CheckoutProductSummaryProps) {\n  const {status, product, price} = useCheckoutProduct();\n\n  if (status === 'error' || (status !== 'pending' && (!product || !price))) {\n    return null;\n  }\n\n  return (\n    <div>\n      <h2 className=\"text-2xl mb-30\">\n        <Trans message=\"Summary\" />\n      </h2>\n      {status === 'pending' ? (\n        <LoadingSkeleton key=\"loading-skeleton\" />\n      ) : (\n        <ProductSummary\n          product={product!}\n          price={price!}\n          showBillingLine={showBillingLine}\n        />\n      )}\n    </div>\n  );\n}\n\ninterface ProductSummaryProps {\n  product: Product;\n  price: Price;\n  showBillingLine: boolean;\n}\nfunction ProductSummary({\n  product,\n  price,\n  showBillingLine,\n}: ProductSummaryProps) {\n  return (\n    <m.div>\n      <div className=\"text-xl font-semibold mb-6\">{product.name}</div>\n      {product.description && (\n        <div className=\"text-sm text-muted\">{product.description}</div>\n      )}\n      <FormattedPrice\n        priceClassName=\"font-bold text-4xl\"\n        periodClassName=\"text-muted text-xs\"\n        variant=\"separateLine\"\n        price={price}\n        className=\"mt-32\"\n      />\n      <ProductFeatureList product={product} />\n      {showBillingLine && (\n        <div className=\"flex items-center justify-between gap-24 border-t pt-24 mt-32 font-medium\">\n          <div>\n            <Trans message=\"Billed today\" />\n          </div>\n          <div>\n            <FormattedCurrency value={price.amount} currency={price.currency} />\n          </div>\n        </div>\n      )}\n    </m.div>\n  );\n}\n\nfunction LoadingSkeleton() {\n  return (\n    <m.div {...opacityAnimation} className=\"max-w-180\">\n      <Skeleton className=\"text-xl mb-6\" />\n      <Skeleton className=\"text-sm\" />\n      <Skeleton className=\"text-4xl mt-32\" />\n    </m.div>\n  );\n}\n","/*!\n * paypal-js v7.1.1 (2023-11-27T14:12:58.587Z)\n * Copyright 2020-present, PayPal, Inc. All rights reserved.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nfunction findScript(url, attributes) {\n    var currentScript = document.querySelector(\"script[src=\\\"\".concat(url, \"\\\"]\"));\n    if (currentScript === null)\n        return null;\n    var nextScript = createScriptElement(url, attributes);\n    // ignore the data-uid-auto attribute that gets auto-assigned to every script tag\n    var currentScriptClone = currentScript.cloneNode();\n    delete currentScriptClone.dataset.uidAuto;\n    // check if the new script has the same number of data attributes\n    if (Object.keys(currentScriptClone.dataset).length !==\n        Object.keys(nextScript.dataset).length) {\n        return null;\n    }\n    var isExactMatch = true;\n    // check if the data attribute values are the same\n    Object.keys(currentScriptClone.dataset).forEach(function (key) {\n        if (currentScriptClone.dataset[key] !== nextScript.dataset[key]) {\n            isExactMatch = false;\n        }\n    });\n    return isExactMatch ? currentScript : null;\n}\nfunction insertScriptElement(_a) {\n    var url = _a.url, attributes = _a.attributes, onSuccess = _a.onSuccess, onError = _a.onError;\n    var newScript = createScriptElement(url, attributes);\n    newScript.onerror = onError;\n    newScript.onload = onSuccess;\n    document.head.insertBefore(newScript, document.head.firstElementChild);\n}\nfunction processOptions(options) {\n    var sdkBaseUrl = \"https://www.paypal.com/sdk/js\";\n    if (options.sdkBaseUrl) {\n        sdkBaseUrl = options.sdkBaseUrl;\n        delete options.sdkBaseUrl;\n    }\n    var optionsWithStringIndex = options;\n    var _a = Object.keys(optionsWithStringIndex)\n        .filter(function (key) {\n        return (typeof optionsWithStringIndex[key] !== \"undefined\" &&\n            optionsWithStringIndex[key] !== null &&\n            optionsWithStringIndex[key] !== \"\");\n    })\n        .reduce(function (accumulator, key) {\n        var value = optionsWithStringIndex[key].toString();\n        key = camelCaseToKebabCase(key);\n        if (key.substring(0, 4) === \"data\" || key === \"crossorigin\") {\n            accumulator.attributes[key] = value;\n        }\n        else {\n            accumulator.queryParams[key] = value;\n        }\n        return accumulator;\n    }, {\n        queryParams: {},\n        attributes: {},\n    }), queryParams = _a.queryParams, attributes = _a.attributes;\n    if (queryParams[\"merchant-id\"] &&\n        queryParams[\"merchant-id\"].indexOf(\",\") !== -1) {\n        attributes[\"data-merchant-id\"] = queryParams[\"merchant-id\"];\n        queryParams[\"merchant-id\"] = \"*\";\n    }\n    return {\n        url: \"\".concat(sdkBaseUrl, \"?\").concat(objectToQueryString(queryParams)),\n        attributes: attributes,\n    };\n}\nfunction camelCaseToKebabCase(str) {\n    var replacer = function (match, indexOfMatch) {\n        return (indexOfMatch ? \"-\" : \"\") + match.toLowerCase();\n    };\n    return str.replace(/[A-Z]+(?![a-z])|[A-Z]/g, replacer);\n}\nfunction objectToQueryString(params) {\n    var queryString = \"\";\n    Object.keys(params).forEach(function (key) {\n        if (queryString.length !== 0)\n            queryString += \"&\";\n        queryString += key + \"=\" + params[key];\n    });\n    return queryString;\n}\nfunction createScriptElement(url, attributes) {\n    if (attributes === void 0) { attributes = {}; }\n    var newScript = document.createElement(\"script\");\n    newScript.src = url;\n    Object.keys(attributes).forEach(function (key) {\n        newScript.setAttribute(key, attributes[key]);\n        if (key === \"data-csp-nonce\") {\n            newScript.setAttribute(\"nonce\", attributes[\"data-csp-nonce\"]);\n        }\n    });\n    return newScript;\n}\n\n/**\n * Load the Paypal JS SDK script asynchronously.\n *\n * @param {Object} options - used to configure query parameters and data attributes for the JS SDK.\n * @param {PromiseConstructor} [PromisePonyfill=window.Promise] - optional Promise Constructor ponyfill.\n * @return {Promise<Object>} paypalObject - reference to the global window PayPal object.\n */\nfunction loadScript(options, PromisePonyfill) {\n    if (PromisePonyfill === void 0) { PromisePonyfill = Promise; }\n    validateArguments(options, PromisePonyfill);\n    // resolve with null when running in Node or Deno\n    if (typeof document === \"undefined\")\n        return PromisePonyfill.resolve(null);\n    var _a = processOptions(options), url = _a.url, attributes = _a.attributes;\n    var namespace = attributes[\"data-namespace\"] || \"paypal\";\n    var existingWindowNamespace = getPayPalWindowNamespace(namespace);\n    // resolve with the existing global paypal namespace when a script with the same params already exists\n    if (findScript(url, attributes) && existingWindowNamespace) {\n        return PromisePonyfill.resolve(existingWindowNamespace);\n    }\n    return loadCustomScript({\n        url: url,\n        attributes: attributes,\n    }, PromisePonyfill).then(function () {\n        var newWindowNamespace = getPayPalWindowNamespace(namespace);\n        if (newWindowNamespace) {\n            return newWindowNamespace;\n        }\n        throw new Error(\"The window.\".concat(namespace, \" global variable is not available.\"));\n    });\n}\n/**\n * Load a custom script asynchronously.\n *\n * @param {Object} options - used to set the script url and attributes.\n * @param {PromiseConstructor} [PromisePonyfill=window.Promise] - optional Promise Constructor ponyfill.\n * @return {Promise<void>} returns a promise to indicate if the script was successfully loaded.\n */\nfunction loadCustomScript(options, PromisePonyfill) {\n    if (PromisePonyfill === void 0) { PromisePonyfill = Promise; }\n    validateArguments(options, PromisePonyfill);\n    var url = options.url, attributes = options.attributes;\n    if (typeof url !== \"string\" || url.length === 0) {\n        throw new Error(\"Invalid url.\");\n    }\n    if (typeof attributes !== \"undefined\" && typeof attributes !== \"object\") {\n        throw new Error(\"Expected attributes to be an object.\");\n    }\n    return new PromisePonyfill(function (resolve, reject) {\n        // resolve with undefined when running in Node or Deno\n        if (typeof document === \"undefined\")\n            return resolve();\n        insertScriptElement({\n            url: url,\n            attributes: attributes,\n            onSuccess: function () { return resolve(); },\n            onError: function () {\n                var defaultError = new Error(\"The script \\\"\".concat(url, \"\\\" failed to load. Check the HTTP status code and response body in DevTools to learn more.\"));\n                return reject(defaultError);\n            },\n        });\n    });\n}\nfunction getPayPalWindowNamespace(namespace) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return window[namespace];\n}\nfunction validateArguments(options, PromisePonyfill) {\n    if (typeof options !== \"object\" || options === null) {\n        throw new Error(\"Expected an options object.\");\n    }\n    if (typeof PromisePonyfill !== \"undefined\" &&\n        typeof PromisePonyfill !== \"function\") {\n        throw new Error(\"Expected PromisePonyfill to be a function.\");\n    }\n}\n\n// replaced with the package.json version at build time\nvar version = \"7.1.1\";\n\nexport { loadCustomScript, loadScript, version };\n","import {useEffect, useRef, useState} from 'react';\nimport {loadScript} from '@paypal/paypal-js';\nimport {useProducts} from '@common/billing/pricing-table/use-products';\nimport {useSettings} from '@common/core/settings/use-settings';\n\ninterface UsePaypalProps {\n  productId?: string;\n  priceId?: string;\n}\nexport function usePaypal({productId, priceId}: UsePaypalProps) {\n  const {data} = useProducts();\n  const paypalLoadStarted = useRef<boolean>(false);\n  const paypalButtonsRendered = useRef<boolean>(false);\n  const [paypalIsLoaded, setPaypalIsLoaded] = useState(false);\n  const paypalElementRef = useRef<HTMLDivElement>(null);\n  const {\n    base_url,\n    billing: {\n      stripe: {enable: stripeEnabled},\n      paypal: {enable: paypalEnabled, public_key},\n    },\n  } = useSettings();\n\n  useEffect(() => {\n    if (!paypalEnabled || !public_key || paypalLoadStarted.current) return;\n    loadScript({\n      clientId: public_key,\n      intent: 'subscription',\n      vault: true,\n      disableFunding: stripeEnabled ? 'card' : undefined,\n    }).then(() => {\n      setPaypalIsLoaded(true);\n    });\n    paypalLoadStarted.current = true;\n  }, [public_key, paypalEnabled, stripeEnabled]);\n\n  useEffect(() => {\n    if (\n      !paypalIsLoaded ||\n      !window.paypal?.Buttons ||\n      !paypalElementRef.current ||\n      !data?.products.length ||\n      !productId ||\n      !priceId ||\n      paypalButtonsRendered.current\n    )\n      return;\n\n    const product = data.products.find(p => p.id === parseInt(productId));\n    const price = product?.prices.find(p => p.id === parseInt(priceId));\n\n    window.paypal\n      .Buttons({\n        style: {\n          label: 'pay',\n        },\n        createSubscription: (data, actions) => {\n          return actions.subscription.create({\n            application_context: {\n              shipping_preference: 'NO_SHIPPING',\n            },\n            plan_id: price?.paypal_id!,\n          });\n        },\n        onApprove: (data, actions) => {\n          actions.redirect(\n            `${base_url}/checkout/${productId}/${priceId}/paypal/done?subscriptionId=${data.subscriptionID}&status=success`\n          );\n          return Promise.resolve();\n        },\n        onError: e => {\n          location.href = `${base_url}/checkout/${productId}/${priceId}/paypal/done?status=error`;\n        },\n      })\n      .render(paypalElementRef.current)\n      .then(() => {\n        paypalButtonsRendered.current = true;\n      });\n  }, [productId, priceId, data, paypalIsLoaded, base_url]);\n\n  return {\n    paypalElementRef,\n    stripeIsEnabled: public_key != null && paypalEnabled,\n  };\n}\n","import {useEffect, useRef, useState} from 'react';\nimport {useAuth} from '../../../auth/use-auth';\nimport {apiClient} from '../../../http/query-client';\nimport {useSelectedLocale} from '../../../i18n/selected-locale';\nimport {useSettings} from '../../../core/settings/use-settings';\nimport {useIsDarkMode} from '../../../ui/themes/use-is-dark-mode';\nimport {Button} from '../../../ui/buttons/button';\n\ninterface UsePhonesubProps {\n  type?:    string;\n  priceId?: string;\n}\n\nexport interface PhonesubResponse {\n  status?: string;\n  phone?: string;\n  message?: string;\n  error?: {\n    message: string;\n    type: string;\n  };\n  subscriptionId?: string;\n}\n\nexport interface PhonesubPayload {\n  auth_code?: string\n  phone?:   string;\n}\n\nexport function usePhonesub({priceId}: UsePhonesubProps) {\n  const {user} = useAuth();\n  const isDarkMode = useIsDarkMode();\n  const isInitiatedRef = useRef<boolean>(false);\n  const {localeCode} = useSelectedLocale();\n  const {\n    branding: {site_name},\n    billing: {\n      phonesub: {enable},\n    },\n  } = useSettings();\n\n  const subscribeStart = async ({phone}: PhonesubPayload): Promise<PhonesubResponse> => {\n    const response = await apiClient.post('billing/phonesub/subscribe-start', {price_id:priceId, phone:phone});\n\n    return response.data;\n  }\n\n  const subscribeVerify = async ({auth_code}: PhonesubPayload): Promise<PhonesubResponse> => {\n    const response = await apiClient.post('billing/phonesub/subscribe-verify', {price_id:priceId, auth_code});\n\n    return response.data;\n  }\n\n  const syncSubscriptionDetails = () => {\n    return apiClient.post('billing/phonesub/sync-subscription-details', {\n      price_id: priceId,\n    });\n  }\n\n  return {\n    phonesub: {subscribeStart, subscribeVerify, syncSubscriptionDetails},\n    phonesubIsEnabled: enable,\n  };\n}\n","import {ReactNode} from 'react'\n\ntype Props = {\n  title?:  string | ReactNode | undefined,\n  message: string | ReactNode | undefined,\n  type?:   'danger' | 'info'\n}\n\nexport function Alert({title, message, type}: Props) {\n  type = type ?? 'danger'\n  const colorClasses = {\n    info: {\n      title: \"bg-primary text-white\",\n      body:  \"border-primary bg-primary-light dark:bg-primary-dark text-black dark:text-white\"\n    },\n    danger: {\n      title: \"bg-danger text-white\",\n      body:  \"border-danger bg-danger-lighter dark:bg-danger-darker text-black dark:text-white\"\n    },\n  }\n  return (\n    <div role=\"alert\" className=\"mb-32\">\n    {title && (\n      <div className={`${colorClasses[type]?.title} font-bold rounded-t px-8 py-4`}>\n        {title}\n      </div>\n    )}\n      <div className={`${colorClasses[type]?.body} border border-t-0 rounded-b px-8 py-6`}>\n        <p>{message}</p>\n      </div>\n    </div>\n  )\n}\n","export function obfuscatePhone(\n  phone: string | undefined\n): string {\n  const len = phone?.length ?? 0;\n  const cut = 3;\n\n  if (phone === undefined) return '';\n\n  return phone.substring(0, cut) + phone.substring(cut, len-cut).replace(/./g, '.') + phone.substring(len-cut);\n}\n","import {Button} from '../../../ui/buttons/button';\nimport {useForm} from 'react-hook-form';\nimport {Form} from '../../../ui/forms/form';\nimport {FormTextField} from '../../../ui/forms/input-field/text-field/text-field';\nimport {Trans} from '../../../i18n/trans';\nimport {ReactNode, useState, useRef} from 'react';\nimport {useAuth} from '../../../auth/use-auth';\nimport {usePhonesub, PhonesubPayload} from './use-phonesub';\nimport {Alert} from '../../../alerts/alert';\nimport {obfuscatePhone} from '../../../utils/string/obfuscate-phone';\nimport {toast} from '../../../ui/toast/toast';\nimport {useNavigate} from '../../../utils/hooks/use-navigate';\nimport {ProgressCircle} from '../../../ui/progress/progress-circle';\n\ninterface PhonesubElementsFormProps {\n  productId?: string;\n  priceId?: string;\n  type: 'setupIntent' | 'subscription';\n  submitLabel: ReactNode;\n  verifyLabel: ReactNode;\n  resendLabel: ReactNode;\n  returnUrl: string;\n}\nexport function PhonesubElementsForm({\n  priceId,\n  type = 'subscription',\n  submitLabel,\n  verifyLabel,\n  resendLabel,\n  returnUrl,\n}: PhonesubElementsFormProps) {\n  const {phonesub, phonesubIsEnabled} = usePhonesub({\n    type,\n    priceId,\n  });\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [subStatus, setSubStatus] = useState<string>('start');\n  const navigate = useNavigate();\n  const {user} = useAuth();\n\n  const form = useForm<{auth_code:string, phone:string}>({\n    defaultValues: {\n      phone: user?.phone || '', // Set default value for phone\n    },\n  });\n  const authRef = useRef<HTMLInputElement>(null);\n  const phoneRef = useRef<HTMLInputElement>(null);\n\n  const isStateVerify = subStatus == 'verify' || subStatus == 'verified';\n  const isStateError = subStatus == 'syncerror' || subStatus == 'expired';\n  const isStateStart = subStatus == 'start';\n\n  // disable upgrade button if phonesub is enabled, but not loaded yet\n  const phonesubIsReady: boolean =\n    !phonesubIsEnabled || (phonesub != null);\n\n  const handleSubmit = async (payload: PhonesubPayload) => {\n    // phonesub has not loaded yet\n    if (!phonesub) return;\n\n    setIsSubmitting(true);\n\n    try {\n      const method = subStatus !== 'verify' ? 'subscribeStart' : 'subscribeVerify';\n      const result = await phonesub[method](payload);\n\n      if (result.status == 'verify' && result.phone && user) {\n        user.phone = result.phone;\n      }\n\n      if (result.status == 'verified') {\n        setSyncTimeout();\n      }\n\n      if (result.status) {\n        setSubStatus(result.status);\n      }\n\n      // don't show validation error as it will be shown already by phonesub payment element\n      if (result.error?.type !== 'validation_error' && result.error?.message) {\n        setErrorMessage(result.error.message);\n      }\n      else {\n        setErrorMessage(null);\n      }\n    } catch {}\n\n    setIsSubmitting(false);\n  };\n\n  const setSyncTimeout = (syncTimeoutIdx: number = 0) => {\n    return setTimeout(() => {\n      phonesub.syncSubscriptionDetails().then((resp) => {\n        if (resp?.data?.message) toast(resp?.data?.message);\n        navigate(returnUrl+'?status=success&subscriptionId='+(resp?.data?.subscriptionId ?? 'null'));\n\n      }, (err) => {\n        if (syncTimeoutIdx > 15) {\n          setSubStatus('syncerror');\n        }\n        else {\n          setSyncTimeout(syncTimeoutIdx + 1);\n        }\n      });\n    }, 1000);\n  }\n\n\n  return (\n    <Form form={form} onSubmit={handleSubmit}>\n      { subStatus === 'verify' && (\n        <div>\n          <Alert\n            title={<Trans message=\"Sending verification code\" />}\n            type=\"info\"\n            message={\n              <Trans message=\"Please enter verification code sent to your phone number: :phone\"\n              values={{phone: obfuscatePhone(user?.phone)}}\n              />\n            }\n            />\n          <FormTextField\n            className=\"mb-32\"\n            name=\"auth_code\"\n            type=\"text\"\n            label={<Trans message=\"Verification code\" />}\n            required\n            inputRef={authRef}\n          />\n        </div>\n      )}\n      { subStatus === 'verified' && (\n        <div>\n          <div className=\"flex items-center justify-center flex-auto mb-8\">\n            <ProgressCircle isIndeterminate aria-label=\"Waiting for server response...\" />\n          </div>\n          <Alert\n            title={<Trans message=\"Verification successful\" />}\n            type=\"info\"\n            message={\n              <Trans message=\"Waiting for Subscription server response...\"/>\n            }\n            />\n        </div>\n      )}\n      { subStatus === 'syncerror' && (\n        <div className=\"text-danger mt-20\"><Trans message=\"Something went wrong. Please try again later.\"/></div>\n      )}\n      {errorMessage && !isSubmitting && (\n        <div className=\"text-danger mt-20\">{errorMessage}</div>\n      )}\n      {isStateStart && (\n        <div>\n          <Alert\n            title={<Trans message=\"Enter phone number\" />}\n            type=\"info\"\n            message={\n              <Trans message=\"Please enter phone number you intend to use for phone payment\" />\n            }\n            />\n          <FormTextField\n            className=\"mb-32\"\n            name=\"phone\"\n            type=\"text\"\n            label={<Trans message=\"Phone number\" />}\n            required\n            inputRef={phoneRef}\n          />\n        </div>\n      )}\n      <Button\n        variant=\"flat\"\n        color=\"primary\"\n        size=\"md\"\n        className=\"w-full mt-40\"\n        type=\"submit\"\n        disabled={isSubmitting || !phonesubIsReady}\n      >\n        {isStateVerify ? verifyLabel : (isStateError ? resendLabel : submitLabel)}\n      </Button>\n    </Form>\n  );\n}\n\n","import {Navigate, useParams} from 'react-router-dom';\nimport {Trans} from '../../i18n/trans';\nimport {CheckoutLayout} from './checkout-layout';\nimport {CheckoutProductSummary} from './checkout-product-summary';\nimport {usePaypal} from './paypal/use-paypal';\nimport {StripeElementsForm} from './stripe/stripe-elements-form';\nimport {PhonesubElementsForm} from './phonesub/phonesub-elements-form';\nimport {Fragment} from 'react';\nimport {useProducts} from '../pricing-table/use-products';\nimport {FullPageLoader} from '../../ui/progress/full-page-loader';\nimport {useSettings} from '../../core/settings/use-settings';\nimport {Button} from '../../ui/buttons/button';\nimport {useNavigate} from '../../utils/hooks/use-navigate';\n\nexport function Checkout() {\n  const {productId, priceId, paymentMethodId} = useParams();\n  const productQuery = useProducts();\n  const {paypalElementRef} = usePaypal({\n    productId,\n    priceId,\n  });\n  const {\n    base_url,\n    billing: {stripe, phonesub, paypal},\n  } = useSettings();\n  const navigate = useNavigate();\n\n  if (productQuery.isLoading) {\n    return <FullPageLoader screen />;\n  }\n\n  const product = productQuery.data?.products.find(\n    p => p.id === parseInt(productId!)\n  );\n  const price = product?.prices.find(p => p.id === parseInt(priceId!));\n\n  // make sure product and price exists in backend\n  if (!product || !price || productQuery.status === 'error') {\n    return <Navigate to=\"/pricing\" replace />;\n  }\n\n  const paymentMethodComponents = [\n    {\n      key: 'phonesub',\n      component: (\n        <PhonesubElementsForm\n          productId={productId}\n          priceId={priceId}\n          submitLabel={<Trans message=\"Send code\" />}\n          verifyLabel={<Trans message=\"Verify code\" />}\n          resendLabel={<Trans message=\"Resend code\" />}\n          type=\"subscription\"\n          returnUrl={`/checkout/${productId}/${priceId}/phonesub/done`}\n        />\n      ),\n      enable: phonesub.enable && (price?.paymentMethods || []).includes('phonesub'),\n    },\n    {\n      key: 'stripe',\n      component: (\n        <StripeElementsForm\n          productId={productId}\n          priceId={priceId}\n          submitLabel={<Trans message=\"Upgrade\" />}\n          type=\"subscription\"\n          returnUrl={`${base_url}/checkout/${productId}/${priceId}/stripe/done`}\n        />\n      ),\n      enable: stripe.enable && (price?.paymentMethods || []).includes('stripe'),\n    },\n    {\n      key: 'paypal',\n      component: <div ref={paypalElementRef} />,\n      enable: paypal.enable && (price?.paymentMethods || []).includes('paypal'),\n    },\n    {\n      key: 'go-back',\n      component: (\n        <Button\n          variant=\"flat\"\n          color=\"chip\"\n          size=\"md\"\n          className=\"w-full\"\n          type=\"button\"\n          onClick={() => {\n            navigate('/pricing');\n          }}\n        >\n          <Trans message=\"Go back\" />\n        </Button>\n      ),\n      enable: true,\n    }\n  ];\n\n  paymentMethodComponents.sort((a, b) => {\n    if (a.key === paymentMethodId) return -1;\n    if (b.key === paymentMethodId) return 1;\n    return 0;\n  });\n\n  const enabledComponents = paymentMethodComponents.filter(\n    component => component.enable\n  );\n\n  return (\n    <CheckoutLayout>\n      <Fragment>\n        <h1 className=\"mb-40 text-4xl\">\n          <Trans message=\"Checkout\" />\n        </h1>\n        {enabledComponents.map((component, index) => (\n          <Fragment key={component.key}>\n            {component.component}\n            {index < enabledComponents.length - 1 && <Separator />}\n          </Fragment>\n        ))}\n        <div className=\"mt-30 text-xs text-muted\">\n          <Trans message=\"You’ll be charged until you cancel your subscription. Previous charges won’t be refunded when you cancel unless it’s legally required. Your payment data is encrypted and secure. By subscribing your agree to our terms of service and privacy policy.\" />\n        </div>\n      </Fragment>\n      <CheckoutProductSummary />\n    </CheckoutLayout>\n  );\n}\n\nfunction Separator() {\n  return (\n    <div className=\"relative my-20 text-center before:absolute before:left-0 before:top-1/2 before:h-1 before:w-full before:-translate-y-1/2 before:bg-divider\">\n      <span className=\"relative z-10 bg px-10 text-sm text-muted\">\n        <Trans message=\"or\" />\n      </span>\n    </div>\n  );\n}\n","import {CheckoutLayout} from '../checkout-layout';\nimport {useParams, useSearchParams} from 'react-router-dom';\nimport {loadStripe, PaymentIntent} from '@stripe/stripe-js';\nimport {useEffect, useRef, useState} from 'react';\nimport {message} from '../../../i18n/message';\nimport {CheckoutProductSummary} from '../checkout-product-summary';\nimport {\n  BillingRedirectMessage,\n  BillingRedirectMessageConfig,\n} from '../../billing-redirect-message';\nimport {useNavigate} from '../../../utils/hooks/use-navigate';\nimport {apiClient} from '../../../http/query-client';\nimport {useSettings} from '../../../core/settings/use-settings';\nimport {useBootstrapData} from '../../../core/bootstrap-data/bootstrap-data-context';\n\nexport function CheckoutStripeDone() {\n  const {invalidateBootstrapData} = useBootstrapData();\n  const {productId, priceId} = useParams();\n  const navigate = useNavigate();\n  const {\n    billing: {stripe_public_key},\n  } = useSettings();\n\n  const [params] = useSearchParams();\n  const clientSecret = params.get('payment_intent_client_secret');\n\n  const [messageConfig, setMessageConfig] =\n    useState<BillingRedirectMessageConfig>();\n\n  const stripeInitiated = useRef<boolean>();\n\n  useEffect(() => {\n    if (stripeInitiated.current) return;\n    loadStripe(stripe_public_key!).then(async stripe => {\n      if (!stripe || !clientSecret) {\n        setMessageConfig(getRedirectMessageConfig());\n        return;\n      }\n      stripe.retrievePaymentIntent(clientSecret).then(({paymentIntent}) => {\n        if (paymentIntent?.status === 'succeeded') {\n          storeSubscriptionDetailsLocally(paymentIntent.id).then(() => {\n            invalidateBootstrapData();\n          });\n        }\n        setMessageConfig(\n          getRedirectMessageConfig(paymentIntent?.status, productId, priceId),\n        );\n      });\n    });\n    stripeInitiated.current = true;\n  }, [\n    stripe_public_key,\n    clientSecret,\n    priceId,\n    productId,\n    invalidateBootstrapData,\n  ]);\n\n  if (!clientSecret) {\n    navigate('/');\n    return null;\n  }\n\n  return (\n    <CheckoutLayout>\n      <BillingRedirectMessage config={messageConfig} />\n      <CheckoutProductSummary showBillingLine={false} />\n    </CheckoutLayout>\n  );\n}\n\nfunction getRedirectMessageConfig(\n  status?: PaymentIntent.Status,\n  productId?: string,\n  priceId?: string,\n): BillingRedirectMessageConfig {\n  switch (status) {\n    case 'succeeded':\n      return {\n        message: message('Subscription successful!'),\n        status: 'success',\n        buttonLabel: message('Return to site'),\n        link: '/billing',\n      };\n    case 'processing':\n      return {\n        message: message(\n          \"Payment processing. We'll update you when payment is received.\",\n        ),\n        status: 'success',\n        buttonLabel: message('Return to site'),\n        link: '/billing',\n      };\n    case 'requires_payment_method':\n      return {\n        message: message('Payment failed. Please try another payment method.'),\n        status: 'error',\n        buttonLabel: message('Go back'),\n        link: errorLink(productId, priceId),\n      };\n    default:\n      return {\n        message: message('Something went wrong'),\n        status: 'error',\n        buttonLabel: message('Go back'),\n        link: errorLink(productId, priceId),\n      };\n  }\n}\n\nfunction errorLink(productId?: string, priceId?: string): string {\n  return productId && priceId ? `/checkout/${productId}/${priceId}` : '/';\n}\n\nfunction storeSubscriptionDetailsLocally(paymentIntentId: string) {\n  return apiClient.post('billing/stripe/store-subscription-details-locally', {\n    payment_intent_id: paymentIntentId,\n  });\n}\n","import {CheckoutLayout} from '../checkout-layout';\nimport {useParams, useSearchParams} from 'react-router-dom';\nimport {useEffect, useState} from 'react';\nimport {message} from '@common/i18n/message';\nimport {CheckoutProductSummary} from '../checkout-product-summary';\nimport {\n  BillingRedirectMessage,\n  BillingRedirectMessageConfig,\n} from '../../billing-redirect-message';\nimport {apiClient} from '@common/http/query-client';\nimport {useBootstrapData} from '@common/core/bootstrap-data/bootstrap-data-context';\n\nexport function CheckoutPaypalDone() {\n  const {invalidateBootstrapData} = useBootstrapData();\n  const {productId, priceId} = useParams();\n  const [params] = useSearchParams();\n\n  const [messageConfig, setMessageConfig] =\n    useState<BillingRedirectMessageConfig>();\n\n  useEffect(() => {\n    const subscriptionId = params.get('subscriptionId');\n    const status = params.get('status');\n    setMessageConfig(getRedirectMessageConfig(status, productId, priceId));\n    if (subscriptionId && status === 'success') {\n      storeSubscriptionDetailsLocally(subscriptionId).then(() => {\n        invalidateBootstrapData();\n      });\n    }\n  }, [priceId, productId, params, invalidateBootstrapData]);\n\n  return (\n    <CheckoutLayout>\n      <BillingRedirectMessage config={messageConfig} />\n      <CheckoutProductSummary showBillingLine={false} />\n    </CheckoutLayout>\n  );\n}\n\nfunction getRedirectMessageConfig(\n  status?: 'success' | 'error' | string | null,\n  productId?: string,\n  priceId?: string,\n): BillingRedirectMessageConfig {\n  switch (status) {\n    case 'success':\n      return {\n        message: message('Subscription successful!'),\n        status: 'success',\n        buttonLabel: message('Return to site'),\n        link: '/billing',\n      };\n    default:\n      return {\n        message: message('Something went wrong. Please try again.'),\n        status: 'error',\n        buttonLabel: message('Go back'),\n        link: errorLink(productId, priceId),\n      };\n  }\n}\n\nfunction errorLink(productId?: string, priceId?: string): string {\n  return productId && priceId ? `/checkout/${productId}/${priceId}` : '/';\n}\n\nfunction storeSubscriptionDetailsLocally(subscriptionId: string) {\n  return apiClient.post('billing/paypal/store-subscription-details-locally', {\n    paypal_subscription_id: subscriptionId,\n  });\n}\n","import {CheckoutLayout} from '../checkout-layout';\nimport {useParams, useSearchParams} from 'react-router-dom';\nimport {useEffect, useState} from 'react';\nimport {message} from '@common/i18n/message';\nimport {CheckoutProductSummary} from '../checkout-product-summary';\nimport {\n  BillingRedirectMessage,\n  BillingRedirectMessageConfig,\n} from '../../billing-redirect-message';\nimport {apiClient} from '@common/http/query-client';\nimport {useBootstrapData} from '@common/core/bootstrap-data/bootstrap-data-context';\nimport {useLocalStorage} from '@common/utils/hooks/local-storage';\n\nexport function CheckoutPhonesubDone() {\n  const {invalidateBootstrapData} = useBootstrapData();\n  const {productId, priceId} = useParams();\n  const [params] = useSearchParams();\n\n  const [messageConfig, setMessageConfig] =\n    useState<BillingRedirectMessageConfig>();\n\n  const [redirectedFrom, setRedirectedFrom] = useLocalStorage<string>('redirectedFrom');\n\n  useEffect(() => {\n    const subscriptionId = params.get('subscriptionId');\n    const status = params.get('status');\n    setMessageConfig(getRedirectMessageConfig(status, productId, priceId, redirectedFrom));\n\n    if (subscriptionId && status === 'success') {\n      //invalidateBootstrapData();\n    }\n  }, [priceId, productId, params, invalidateBootstrapData]);\n\n  return (\n    <CheckoutLayout>\n      <BillingRedirectMessage config={messageConfig} />\n      <CheckoutProductSummary showBillingLine={false} />\n    </CheckoutLayout>\n  );\n}\n\nfunction getRedirectMessageConfig(\n  status?: string | null,\n  productId?: string,\n  priceId?: string,\n  link?: string\n): BillingRedirectMessageConfig {\n  switch (status) {\n    case 'success':\n      return {\n        message: message('Subscription successful!'),\n        status: 'success',\n        buttonLabel: message('Return to site'),\n        link: link ?? '/',\n      };\n    default:\n      return {\n        message: message('Something went wrong. Please try again.'),\n        status: 'error',\n        buttonLabel: message('Go back'),\n        link: errorLink(productId, priceId),\n      };\n  }\n}\n\nfunction errorLink(productId?: string, priceId?: string): string {\n  return productId && priceId ? `/checkout/${productId}/${priceId}` : '/';\n}\n\n","import {Route, Routes} from 'react-router-dom';\nimport {NotSubscribedRoute} from '../../auth/guards/not-subscribed-route';\nimport {Checkout} from './checkout';\nimport React from 'react';\nimport {CheckoutStripeDone} from './stripe/checkout-stripe-done';\nimport {CheckoutPaypalDone} from './paypal/checkout-paypal-done';\nimport {CheckoutPhonesubDone} from './phonesub/checkout-phonesub-done';\n\nexport default function CheckoutRoutes() {\n  return (\n    <Routes>\n      <Route\n        path=\":productId/:priceId\"\n        element={\n          <NotSubscribedRoute>\n            <Checkout />\n          </NotSubscribedRoute>\n        }\n      />\n      <Route\n        path=\":productId/:priceId/:paymentMethodId\"\n        element={\n          <NotSubscribedRoute>\n            <Checkout />\n          </NotSubscribedRoute>\n        }\n      />\n      <Route\n        path=\":productId/:priceId/stripe/done\"\n        element={\n          <NotSubscribedRoute>\n            <CheckoutStripeDone />\n          </NotSubscribedRoute>\n        }\n      />\n      <Route\n        path=\":productId/:priceId/paypal/done\"\n        element={\n          <NotSubscribedRoute>\n            <CheckoutPaypalDone />\n          </NotSubscribedRoute>\n        }\n      />\n      <Route\n        path=\":productId/:priceId/phonesub/done\"\n        element={\n          <NotSubscribedRoute>\n            <CheckoutPhonesubDone />\n          </NotSubscribedRoute>\n        }\n      />\n    </Routes>\n  );\n}\n"],"names":["NotSubscribedRoute","children","isLoggedIn","isSubscribed","useAuth","jsx","Navigate","Outlet","CheckoutLayout","left","right","useEffect","removeFromLocalStorage","Fragment","StaticPageTitle","Trans","Navbar","jsxs","CustomMenu","LocaleSwitcher","endpoint","productId","useCheckoutProduct","priceId","useParams","query","useQuery","fetchProduct","keepPreviousData","product","_a","price","p","apiClient","response","CheckoutProductSummary","showBillingLine","status","LoadingSkeleton","ProductSummary","m","FormattedPrice","ProductFeatureList","FormattedCurrency","opacityAnimation","Skeleton","findScript","url","attributes","currentScript","nextScript","createScriptElement","currentScriptClone","isExactMatch","key","insertScriptElement","onSuccess","onError","newScript","processOptions","options","sdkBaseUrl","optionsWithStringIndex","accumulator","value","camelCaseToKebabCase","queryParams","objectToQueryString","str","replacer","match","indexOfMatch","params","queryString","loadScript","PromisePonyfill","validateArguments","namespace","existingWindowNamespace","getPayPalWindowNamespace","loadCustomScript","newWindowNamespace","resolve","reject","defaultError","usePaypal","data","useProducts","paypalLoadStarted","useRef","paypalButtonsRendered","paypalIsLoaded","setPaypalIsLoaded","useState","paypalElementRef","base_url","stripeEnabled","paypalEnabled","public_key","useSettings","actions","e","usePhonesub","useIsDarkMode","useSelectedLocale","site_name","enable","phone","auth_code","Alert","title","message","type","colorClasses","_b","obfuscatePhone","len","cut","PhonesubElementsForm","submitLabel","verifyLabel","resendLabel","returnUrl","phonesub","phonesubIsEnabled","errorMessage","setErrorMessage","isSubmitting","setIsSubmitting","subStatus","setSubStatus","navigate","useNavigate","user","form","useForm","authRef","phoneRef","isStateVerify","isStateError","isStateStart","phonesubIsReady","handleSubmit","payload","result","setSyncTimeout","syncTimeoutIdx","resp","toast","_c","err","Form","FormTextField","ProgressCircle","Button","Checkout","paymentMethodId","productQuery","stripe","paypal","FullPageLoader","paymentMethodComponents","StripeElementsForm","a","b","enabledComponents","component","index","Separator","CheckoutStripeDone","invalidateBootstrapData","useBootstrapData","stripe_public_key","useSearchParams","clientSecret","messageConfig","setMessageConfig","stripeInitiated","loadStripe","getRedirectMessageConfig","paymentIntent","storeSubscriptionDetailsLocally","BillingRedirectMessage","errorLink","paymentIntentId","CheckoutPaypalDone","subscriptionId","CheckoutPhonesubDone","redirectedFrom","setRedirectedFrom","useLocalStorage","link","CheckoutRoutes","Routes","Route"],"mappings":"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","x_google_ignoreList":[4]}